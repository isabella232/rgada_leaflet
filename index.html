<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Веб-ГИС «Чертежи Русского государства XVI-XVII вв.»</title>
    <link rel="stylesheet" href="css/leaflet.css" />
    <link rel="stylesheet" href="vendor/leaflet/MarkerCluster.css" />
    <link rel="stylesheet" href="vendor/leaflet/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="vendor/iconLayers/iconLayers.css" />
    <link rel="stylesheet" href="vendor/leaflet/leaflet.mouseposition.css" />
    <link rel="stylesheet" href="vendor/webix/webix.css" />
    <link rel="stylesheet" href="css/main.css" />


    <script src="vendor/jquery/jquery-3.1.1.min.js"></script>
    <script src="vendor/leaflet/leaflet.js"></script>
    <script src="vendor/leaflet/leaflet.markercluster.js"></script>
    <script src="vendor/leaflet/leaflet-omnivore.min.js"></script>
    <script src="vendor/leaflet/leaflet.mouseposition.js"></script>

    <script src="vendor/iconLayers/iconLayers.js"></script>

    <script src="vendor/webix/webix.js"></script>

    <script src="vendor/proj4leaflet/proj4-compressed.js"></script>
    <script src="vendor/proj4leaflet/proj4leaflet.js"></script>


</head>
    <body class="body--withRightPanel">
        <div class="object-list right-panel active loading">
            <div id="plan_table"></div>
            <div class="object-list__footer">
                <a href="#" data-open-modal="big_table-modal">Полная информация по чертежам</a>
            </div>
        </div>    
        <div id="object-info-right-panel" class="object-info right-panel right-panel--dyn">
            <div class="object-info__content"></div>
            <a href="#" class="close" data-close-right-panel="object-info-right-panel">
                <svg class="close__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    <path d="M0 0h24v24H0z" fill="none"/>
                </svg>
            </a>
        </div>
        <div id="about-right-panel" class="about right-panel right-panel--dyn">
            <div class="h1">О проекте</div>
            <p>Эта геоинформационная система задумана как веб-ресурс, открывающий пользователю доступ к комплексу древнейших русских чертежей - главным образом из Российского государственного архива древних актов. Работа финансируется РНФ (грант № 14-18-02121, рук. И.Г. Коновалова). За исключением одного чертежа XVI в. этот комплекс представлен документами XVII в. (около 1000 документов). Почти все эти чертежи учтены в Каталоге, составленном В.С. Кусовым (Кусов В.С. Московское государство XVI - начала XVIII века. Сводный каталог русских географических чертежей. М., 2007).</p>
            <p>В связи с тем, что чертежи древнее XVIII в. выполнены без математической основы и привязки к координатной сетке, с современной картографической основой они могут быть совмещены либо путем искажения (часто - до неузнаваемости), либо с очень низкой точностью. В поисках приемлемого для пользователя варианта отображение территории, нарисованной на чертеже, мы выполняем двумя способами. 1. Очень приблизительное геокодирование изображений чертежей по небольшому числу узнаваемых точек ландшафта; 2. Обозначение в виде полигона той территории, которая на чертеже изображена. Атрибутивные данные, загружаемые по щелчку мышки на плоскости полигона, заимствованы из Каталога В.С. Кусова.</p>
            <br>
            <p>А.А. Фролов, А.А. Голубинский</p>
            <a href="#" class="close" data-close-right-panel="about-right-panel">
                <svg class="close__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    <path d="M0 0h24v24H0z" fill="none"/>
                </svg>
            </a>
            <div class="ngw-copyright">Работает на <a href="http://nextgis.ru/nextgis-web/" target="_blank">NextGIS Web</a></div>
        </div>
        <div class="map-container">
            <div id="map" class="map"></div>
            <h1 class="map-title">Чертежи Русского государства XVI-XVII вв.</h1>
            <div class="map-opacity map-control">
                <div class="map-opacity__inner">
                    <span class="map-opacity__icon fa fa-adjust"></span>
                    <input class="map-opacity__control" id="raster_opacity" type="range" min="30" max="100" step="1" value="100">
                </div>
            </div>
        </div>
        <div id="big_table-modal" class="stretch-modal">
            <a href="#" class="js-closeModal stretch-modal__close close" data-close-modal="big_table-modal">
                <svg class="close__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    <path d="M0 0h24v24H0z" fill="none"/>
                </svg>
            </a>
            <div id="big_table"></div>
        </div>
        <script lang="text/javascript">
            var point_layer_url = 'http://rgada.info/nextgisweb/resource/891/geojson/',
                polygon_layer_url = 'http://rgada.info/nextgisweb/api/resource/1542/feature/',
                polygon_table_url = 'http://rgada.info/nextgisweb/resource/1542/store/',
                region_boundaries_layer_url = "http://histgeo.nextgis.com/api/component/render/tile?x={x}&y={y}&z={z}&resource=1088",
                region_centers_layer_url = "http://histgeo.nextgis.com/api/component/render/tile?x={x}&y={y}&z={z}&resource=1087",
                polygon_table;

            polygon_table = webix.ajax(polygon_table_url).then(
                function (response) { return response.json(); });
        </script>
        <script src="js/base_layers.js"></script>
        <script src="js/map.js"></script>
        <script src="js/big-table.js"></script>
        <script src="js/plan-table.js"></script>
        <script src="js/modal.js"></script>
    </body>
</html>
